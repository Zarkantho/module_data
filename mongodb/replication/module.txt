###### replication ######


# Replication code? TODO: verify that this is all replication related and document the architecture.
## a part of this i would like to have documented is threads+locks, e.g.
## heartbeats are sent in a unique thread (i think?) and maybe listened for
## in a unique thread too? what threads get started if replication is being
## used?
src/mongo/db/repl/bgsync.cpp (mongod and tools)
src/mongo/db/repl/bgsync.h
src/mongo/db/repl/connections.h
src/mongo/db/repl/consensus.cpp (mongod and tools)
src/mongo/db/repl/health.cpp (mongod and tools)
src/mongo/db/repl/health.h
src/mongo/db/repl/heartbeat.cpp (mongod and tools)
src/mongo/db/repl/is_master.h
src/mongo/db/repl/manager.cpp (mongod and tools)
src/mongo/db/repl/master_slave.cpp (mongod and tools)
src/mongo/db/repl/master_slave.h
src/mongo/db/repl/multicmd.h
src/mongo/db/repl/oplog.cpp (mongod and tools)
src/mongo/db/repl/oplog.h
src/mongo/db/repl/oplogreader.cpp (mongod and tools)
src/mongo/db/repl/oplogreader.h
src/mongo/db/repl/repl_reads_ok.cpp (mongod and tools)
src/mongo/db/repl/repl_reads_ok.h
src/mongo/db/repl/repl_start.cpp (mongod and tools)
src/mongo/db/repl/repl_start.h
src/mongo/db/repl/replication_server_status.cpp (mongod and tools)
src/mongo/db/repl/replication_server_status.h
src/mongo/db/repl/replset_commands.cpp (mongod and tools)
src/mongo/db/repl/replset_web_handler.cpp (mongod)
src/mongo/db/repl/resync.cpp (mongod and tools)
src/mongo/db/repl/rs.cpp (mongod and tools)
src/mongo/db/repl/rs.h
src/mongo/db/repl/rs_config.cpp (mongod and tools)
src/mongo/db/repl/rs_config.h
src/mongo/db/repl/rs_exception.h
src/mongo/db/repl/rs_initialsync.cpp (mongod and tools)
src/mongo/db/repl/rs_initiate.cpp (mongod and tools)
src/mongo/db/repl/rs_member.h
src/mongo/db/repl/rs_rollback.cpp (mongod and tools)
src/mongo/db/repl/rs_sync.cpp (mongod and tools)
src/mongo/db/repl/rs_sync.h
src/mongo/db/repl/sync.cpp (mongod and tools)
src/mongo/db/repl/sync.h
src/mongo/db/repl/sync_source_feedback.cpp (mongod and tools)
src/mongo/db/repl/sync_source_feedback.h

# Helpers to wait for the appropriate write concern

src/mongo/db/write_concern.cpp (mongod and tools)
src/mongo/db/write_concern.h

# Actual meat of the waiting for write concern code

src/mongo/db/repl/write_concern.cpp (mongod and tools)
src/mongo/db/repl/write_concern.h


